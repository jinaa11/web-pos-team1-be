<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="ko"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>HqAdminController.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">webpos</a> &gt; <a href="index.source.html" class="el_package">com.ssg.webpos.controller.admin</a> &gt; <span class="el_source">HqAdminController.java</span></div><h1>HqAdminController.java</h1><pre class="source lang-java linenums">package com.ssg.webpos.controller.admin;

import com.ssg.webpos.domain.*;
import com.ssg.webpos.dto.StockReportDTO;
import com.ssg.webpos.dto.StoreListDTO;
import com.ssg.webpos.dto.settlement.*;
import com.ssg.webpos.dto.stock.AllStockReportResponseDTO;
import com.ssg.webpos.repository.StockReportRepository;
import com.ssg.webpos.repository.store.StoreRepository;
import com.ssg.webpos.service.SettlementDayService;
import com.ssg.webpos.service.SettlementMonthService;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

@RestController
@RequestMapping(&quot;/api/v1/hq&quot;)
<span class="nc" id="L24">@Slf4j</span>
<span class="nc" id="L25">@RequiredArgsConstructor</span>
public class HqAdminController {
    // hq 기능 : 재고 조회, 수정, 삭제, 재고 리포트(주말 재고 현황) 제출
    //          정산 전체 조회,
    private final SettlementDayService settlementDayService;
    private final SettlementMonthService settlementMonthService;
    private final StockReportRepository stockReportRepository;
    private final StoreRepository storeRepository;

    // 전체 월별정산내역 조회
    // &quot;2023&quot;을 받으면 2023년에 생성된 전체 월별정산내역 조회
    @PostMapping(&quot;/settlement-month/all-store&quot;)
    public ResponseEntity settlementMonth(@RequestBody RequsestSettlementMonthDTO requestSettlementMonthDTO) {
        try {
<span class="nc" id="L39">            String year = requestSettlementMonthDTO.getYear();</span>
<span class="nc" id="L40">            List&lt;SettlementMonth&gt; settlementMonths = settlementMonthService.selectByYear(year);</span>
<span class="nc" id="L41">            List&lt;SettlementMonthReportDTO&gt; reportDTOs = new ArrayList&lt;&gt;();</span>

<span class="nc bnc" id="L43" title="All 2 branches missed.">            for(SettlementMonth settlementMonth:settlementMonths) {</span>
<span class="nc" id="L44">                SettlementMonthReportDTO reportDTO = new SettlementMonthReportDTO();</span>
<span class="nc" id="L45">                reportDTO.setSettlementMontnId(settlementMonth.getId());</span>
<span class="nc" id="L46">                reportDTO.setSettlementPrice(settlementMonth.getSettlementPrice());</span>
<span class="nc" id="L47">                reportDTO.setSettlementDate(settlementMonth.getSettlementDate());</span>
<span class="nc" id="L48">                reportDTO.setStoreId(settlementMonth.getStore().getId());</span>
<span class="nc" id="L49">                reportDTO.setStoreName(settlementMonth.getStore().getName());</span>
<span class="nc" id="L50">                reportDTO.setCreatedDate(settlementMonth.getCreatedDate());</span>
<span class="nc" id="L51">                reportDTOs.add(reportDTO);</span>
<span class="nc" id="L52">            }</span>
<span class="nc" id="L53">            return new ResponseEntity(reportDTOs, HttpStatus.OK);</span>
<span class="nc" id="L54">        } catch (Exception e) {</span>
<span class="nc" id="L55">            e.getStackTrace();</span>
<span class="nc" id="L56">            e.printStackTrace();</span>
<span class="nc" id="L57">            return new ResponseEntity(HttpStatus.BAD_REQUEST);</span>
        }
    }

    // store_id별 월별정산내역 조회
    // 1L, &quot;2023&quot;을 받으면 store_id=1L인 가게의 2023년 발생 월별정산내역 조회
    @PostMapping(&quot;/settlement-month/store-id&quot;)
    public ResponseEntity settlementMonthByStoreId(@RequestBody RequestSettlementMonthByStoreIdDTO requestSettlementMonthByStoreIdDTO) {
        try {
<span class="nc" id="L66">            String year = requestSettlementMonthByStoreIdDTO.getYear();</span>
<span class="nc" id="L67">            Long storeId = requestSettlementMonthByStoreIdDTO.getStoreId();</span>
<span class="nc" id="L68">            List&lt;SettlementMonth&gt; settlementMonths = settlementMonthService.selectByStoreIdAndDayBetween(storeId, year);</span>
<span class="nc" id="L69">            List&lt;SettlementMonthReportDTO&gt; reportDTOs = new ArrayList&lt;&gt;();</span>

<span class="nc bnc" id="L71" title="All 2 branches missed.">            for(SettlementMonth settlementMonth:settlementMonths) {</span>
<span class="nc" id="L72">                SettlementMonthReportDTO reportDTO = new SettlementMonthReportDTO();</span>
<span class="nc" id="L73">                reportDTO.setSettlementMontnId(settlementMonth.getId());</span>
<span class="nc" id="L74">                reportDTO.setSettlementPrice(settlementMonth.getSettlementPrice());</span>
<span class="nc" id="L75">                reportDTO.setSettlementDate(settlementMonth.getSettlementDate());</span>
<span class="nc" id="L76">                reportDTO.setStoreId(settlementMonth.getStore().getId());</span>
<span class="nc" id="L77">                reportDTO.setStoreName(settlementMonth.getStore().getName());</span>
<span class="nc" id="L78">                reportDTO.setCreatedDate(settlementMonth.getCreatedDate());</span>
<span class="nc" id="L79">                reportDTOs.add(reportDTO);</span>
<span class="nc" id="L80">            }</span>
<span class="nc" id="L81">            return new ResponseEntity(reportDTOs, HttpStatus.OK);</span>
<span class="nc" id="L82">        } catch (Exception e) {</span>
<span class="nc" id="L83">            e.printStackTrace();</span>
<span class="nc" id="L84">            return new ResponseEntity(HttpStatus.BAD_REQUEST);</span>
        }
    }

    // 전체 기간별 월별정산내역 조회
    // &quot;2023-02&quot;,&quot;2023-03&quot; 받으면 2023-02부터 2023-03의 전체 월별정산내역 조회
    @PostMapping(&quot;/settlement-month/range/all-store&quot;)
    public ResponseEntity settlementMonthRange(@RequestBody RequestSettlementMonthRangeDTO requestSettlementMonthRangeDTO) {
        try {
<span class="nc" id="L93">            String StartDate = requestSettlementMonthRangeDTO.getStartDate();</span>
<span class="nc" id="L94">            String EndDate = requestSettlementMonthRangeDTO.getEndDate();</span>
<span class="nc" id="L95">            List&lt;SettlementMonth&gt; settlementMonths = settlementMonthService.selectByMonthRange(StartDate,EndDate);</span>
<span class="nc" id="L96">            List&lt;SettlementMonthReportDTO&gt; reportDTOs = new ArrayList&lt;&gt;();</span>

<span class="nc bnc" id="L98" title="All 2 branches missed.">            for(SettlementMonth settlementMonth:settlementMonths) {</span>
<span class="nc" id="L99">                SettlementMonthReportDTO reportDTO = new SettlementMonthReportDTO();</span>
<span class="nc" id="L100">                reportDTO.setSettlementMontnId(settlementMonth.getId());</span>
<span class="nc" id="L101">                reportDTO.setSettlementPrice(settlementMonth.getSettlementPrice());</span>
<span class="nc" id="L102">                reportDTO.setSettlementDate(settlementMonth.getSettlementDate());</span>
<span class="nc" id="L103">                reportDTO.setStoreId(settlementMonth.getStore().getId());</span>
<span class="nc" id="L104">                reportDTO.setStoreName(settlementMonth.getStore().getName());</span>
<span class="nc" id="L105">                reportDTO.setCreatedDate(settlementMonth.getCreatedDate());</span>
<span class="nc" id="L106">                reportDTOs.add(reportDTO);</span>
<span class="nc" id="L107">            }</span>

<span class="nc" id="L109">            return new ResponseEntity(reportDTOs, HttpStatus.OK);</span>
<span class="nc" id="L110">        } catch (Exception e) {</span>
<span class="nc" id="L111">            e.printStackTrace();</span>
<span class="nc" id="L112">            return new ResponseEntity(HttpStatus.BAD_REQUEST);</span>
        }
    }

    // store_id별 기간별 월별정산내역 조회
    // 1L, &quot;2023-02&quot;,&quot;2023-03&quot; 받으면 store_id=1L이고 2023-02부터 2023-03의 월별정산내역 조회
    @PostMapping(&quot;/settlement-month/range/store_id&quot;)
    public ResponseEntity settlementMonthRangeByStoreId(@RequestBody RequestSettlementMonthRangeByStoreIdDTO requestSettlementMonthRangeByStoreIdDTO) {
        try {
<span class="nc" id="L121">            String StartDate = requestSettlementMonthRangeByStoreIdDTO.getStartDate();</span>
<span class="nc" id="L122">            String EndDate = requestSettlementMonthRangeByStoreIdDTO.getEndDate();</span>
<span class="nc" id="L123">            Long storeId = requestSettlementMonthRangeByStoreIdDTO.getStoreId();</span>
<span class="nc" id="L124">            List&lt;SettlementMonth&gt; settlementMonths = settlementMonthService.selectByStoreIdAndMonthRange(storeId,StartDate,EndDate);</span>
<span class="nc" id="L125">            List&lt;SettlementMonthReportDTO&gt; reportDTOs = new ArrayList&lt;&gt;();</span>

<span class="nc bnc" id="L127" title="All 2 branches missed.">            for(SettlementMonth settlementMonth:settlementMonths) {</span>
<span class="nc" id="L128">                SettlementMonthReportDTO reportDTO = new SettlementMonthReportDTO();</span>
<span class="nc" id="L129">                reportDTO.setSettlementMontnId(settlementMonth.getId());</span>
<span class="nc" id="L130">                reportDTO.setSettlementPrice(settlementMonth.getSettlementPrice());</span>
<span class="nc" id="L131">                reportDTO.setSettlementDate(settlementMonth.getSettlementDate());</span>
<span class="nc" id="L132">                reportDTO.setStoreId(settlementMonth.getStore().getId());</span>
<span class="nc" id="L133">                reportDTO.setStoreName(settlementMonth.getStore().getName());</span>
<span class="nc" id="L134">                reportDTO.setCreatedDate(settlementMonth.getCreatedDate());</span>
<span class="nc" id="L135">                reportDTOs.add(reportDTO);</span>
<span class="nc" id="L136">            }</span>

<span class="nc" id="L138">            return new ResponseEntity(reportDTOs, HttpStatus.OK);</span>
<span class="nc" id="L139">        } catch (Exception e) {</span>
<span class="nc" id="L140">            e.printStackTrace();</span>
<span class="nc" id="L141">            return new ResponseEntity(HttpStatus.BAD_REQUEST);</span>
        }
    }

    // 전체 일별정산내역 조회
    // &quot;2023-05&quot;을 받으면 2023년 5월에 생성된 전체 일별정산내역 조회
    @PostMapping(&quot;/settlement-day/all-store&quot;)
    public ResponseEntity settlementDay(@RequestBody RequestSettlementDayDTO requestSettlementDayDTO) {
        try {
<span class="nc" id="L150">            String date = requestSettlementDayDTO.getDate();</span>
<span class="nc" id="L151">            List&lt;SettlementDay&gt; settlementDays = settlementDayService.selectByYearMonth(date);</span>
<span class="nc" id="L152">            List&lt;SettlementDayReportDTO&gt; reportDTOs = new ArrayList&lt;&gt;();</span>

<span class="nc bnc" id="L154" title="All 2 branches missed.">            for (SettlementDay settlementDay:settlementDays) {</span>
<span class="nc" id="L155">                SettlementDayReportDTO reportDTO = new SettlementDayReportDTO();</span>
<span class="nc" id="L156">                reportDTO.setSettlementDayId(settlementDay.getId());</span>
<span class="nc" id="L157">                reportDTO.setSettlementPrice(settlementDay.getSettlementPrice());</span>
<span class="nc" id="L158">                reportDTO.setSettlementDate(settlementDay.getSettlementDate());</span>
<span class="nc" id="L159">                reportDTO.setStoreId(settlementDay.getStore().getId());</span>
<span class="nc" id="L160">                reportDTO.setStoreName(settlementDay.getStore().getName());</span>
<span class="nc" id="L161">                reportDTO.setCreatedDate(settlementDay.getCreatedDate());</span>
<span class="nc" id="L162">                reportDTOs.add(reportDTO);</span>
<span class="nc" id="L163">            }</span>
<span class="nc" id="L164">            return new ResponseEntity(reportDTOs,HttpStatus.OK);</span>
<span class="nc" id="L165">        } catch (Exception e) {</span>
<span class="nc" id="L166">            e.printStackTrace();</span>
<span class="nc" id="L167">            return new ResponseEntity(HttpStatus.BAD_REQUEST);</span>
        }
    }

    // store_id별 기간별 일별정산내역 조회
    // &quot;2023-05-08&quot;,&quot;2023-05-10&quot;,1 을 받으면 해당 기간, store_id 생성된 전체 일별정산내역 조회
    @PostMapping(&quot;/settlement-day/range/store-id&quot;)
    public ResponseEntity settlementDayByStoreId(@RequestBody RequestSettlementDayRangeByStoreIdDTO requestSettlementDayRangeByStoreIdDTO) {
        try {
<span class="nc" id="L176">            String startDate = requestSettlementDayRangeByStoreIdDTO.getStartDate();</span>
<span class="nc" id="L177">            String endDate = requestSettlementDayRangeByStoreIdDTO.getEndDate();</span>
<span class="nc" id="L178">            Long storeId = requestSettlementDayRangeByStoreIdDTO.getStoreId();</span>
<span class="nc" id="L179">            List&lt;SettlementDay&gt; settlementDays = settlementDayService.selectByDayAndStoreIdRange(startDate,endDate,storeId);</span>
<span class="nc" id="L180">            List&lt;SettlementDayReportDTO&gt; reportDTOs = new ArrayList&lt;&gt;();</span>

<span class="nc bnc" id="L182" title="All 2 branches missed.">            for (SettlementDay settlementDay:settlementDays) {</span>
<span class="nc" id="L183">                SettlementDayReportDTO reportDTO = new SettlementDayReportDTO();</span>
<span class="nc" id="L184">                reportDTO.setSettlementDayId(settlementDay.getId());</span>
<span class="nc" id="L185">                reportDTO.setSettlementPrice(settlementDay.getSettlementPrice());</span>
<span class="nc" id="L186">                reportDTO.setSettlementDate(settlementDay.getSettlementDate());</span>
<span class="nc" id="L187">                reportDTO.setStoreId(settlementDay.getStore().getId());</span>
<span class="nc" id="L188">                reportDTO.setStoreName(settlementDay.getStore().getName());</span>
<span class="nc" id="L189">                reportDTO.setCreatedDate(settlementDay.getCreatedDate());</span>
<span class="nc" id="L190">                reportDTOs.add(reportDTO);</span>
<span class="nc" id="L191">            }</span>
<span class="nc" id="L192">            return new ResponseEntity(reportDTOs, HttpStatus.OK);</span>
<span class="nc" id="L193">        } catch (Exception e) {</span>
<span class="nc" id="L194">            e.printStackTrace();</span>
<span class="nc" id="L195">            return new ResponseEntity(HttpStatus.BAD_REQUEST);</span>
        }
    }

    // 전체 기간별 일별정산내역 조회
    // &quot;2023-05-09&quot;,&quot;2023-05-11&quot;을 받으면 해당 기간에 생성된 일별정산내역 조회
    @PostMapping(&quot;/settlement-day/range/all-store&quot;)
    public ResponseEntity settlementDayRange(@RequestBody RequestSettlementDayRangeDTO requestSettlementDayRangeDTO) {
        try {
<span class="nc" id="L204">            String startDate = requestSettlementDayRangeDTO.getStartDate();</span>
<span class="nc" id="L205">            String endDate = requestSettlementDayRangeDTO.getEndDate();</span>
<span class="nc" id="L206">            List&lt;SettlementDay&gt; settlementDays = settlementDayService.selectByDayRange(startDate,endDate);</span>
<span class="nc" id="L207">            List&lt;SettlementDayReportDTO&gt; reportDTOs = new ArrayList&lt;&gt;();</span>

<span class="nc bnc" id="L209" title="All 2 branches missed.">            for (SettlementDay settlementDay:settlementDays) {</span>
<span class="nc" id="L210">                SettlementDayReportDTO reportDTO = new SettlementDayReportDTO();</span>
<span class="nc" id="L211">                reportDTO.setSettlementDayId(settlementDay.getId());</span>
<span class="nc" id="L212">                reportDTO.setSettlementPrice(settlementDay.getSettlementPrice());</span>
<span class="nc" id="L213">                reportDTO.setSettlementDate(settlementDay.getSettlementDate());</span>
<span class="nc" id="L214">                reportDTO.setStoreId(settlementDay.getStore().getId());</span>
<span class="nc" id="L215">                reportDTO.setStoreName(settlementDay.getStore().getName());</span>
<span class="nc" id="L216">                reportDTO.setCreatedDate(settlementDay.getCreatedDate());</span>
<span class="nc" id="L217">                reportDTOs.add(reportDTO);</span>
<span class="nc" id="L218">            }</span>
<span class="nc" id="L219">            return new ResponseEntity(reportDTOs, HttpStatus.OK);</span>
<span class="nc" id="L220">        } catch (Exception e) {</span>
<span class="nc" id="L221">            e.printStackTrace();</span>
<span class="nc" id="L222">            return new ResponseEntity(HttpStatus.BAD_REQUEST);</span>
        }
    }


    // 전체 재고 조회
    @GetMapping(&quot;/stock/store&quot;)
    public ResponseEntity stockReport() {
        try {
<span class="nc" id="L231">            List&lt;StockReportDTO&gt; stockReportDTOs = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L232">            List&lt;StockReport&gt; stockReports = stockReportRepository.findAll();</span>

<span class="nc bnc" id="L234" title="All 2 branches missed.">            for (StockReport stockReport : stockReports) {</span>
<span class="nc" id="L235">                StockReportDTO stockReportDTO = new StockReportDTO();</span>
<span class="nc" id="L236">                stockReportDTO.setStoreName(stockReport.getStore().getName());</span>
<span class="nc" id="L237">                stockReportDTO.setProductName(stockReport.getProduct().getName());</span>
<span class="nc" id="L238">                stockReportDTO.setCurrentStock(stockReport.getProduct().getStock());</span>
<span class="nc" id="L239">                stockReportDTO.setSalePrice(stockReport.getProduct().getSalePrice());</span>
<span class="nc" id="L240">                stockReportDTOs.add(stockReportDTO);</span>
<span class="nc" id="L241">            }</span>

<span class="nc" id="L243">            return new ResponseEntity(stockReportDTOs, HttpStatus.OK);</span>
<span class="nc" id="L244">        } catch (Exception e) {</span>
<span class="nc" id="L245">            e.printStackTrace();</span>
<span class="nc" id="L246">            return new ResponseEntity(HttpStatus.BAD_REQUEST);</span>
        }

    }



    // 발주 신청 전체 내역 조회
    // service 활용해서 is_submit=1인 열들만 조회
    // hq는 manager, staff가 발주 신청한 내역만 조회가능하다.List&lt;AllStockReportResponseDTO&gt;
    @GetMapping(&quot;/ordered-product-list&quot;)
    public ResponseEntity submitStockReport() {
        try {
<span class="nc" id="L259">            List&lt;StockReport&gt; stockReports = stockReportRepository.findByIsSubmit(true);</span>
<span class="nc" id="L260">            List&lt;AllStockReportResponseDTO&gt; allStockReportResponseDTOs = new ArrayList&lt;&gt;();</span>

<span class="nc bnc" id="L262" title="All 2 branches missed.">            for (StockReport stockReport : stockReports) {</span>
<span class="nc" id="L263">                AllStockReportResponseDTO allStockReportResponseDTO = new AllStockReportResponseDTO();</span>
<span class="nc" id="L264">                allStockReportResponseDTO.setLastModifiedDate(stockReport.getLastModifiedDate());</span>
<span class="nc" id="L265">                allStockReportResponseDTO.setProductName(stockReport.getProduct().getName());</span>
<span class="nc" id="L266">                allStockReportResponseDTO.setProductCategory(stockReport.getProduct().getCategory());</span>
<span class="nc" id="L267">                allStockReportResponseDTO.setProductSalePrice(stockReport.getProduct().getSalePrice());</span>
<span class="nc" id="L268">                allStockReportResponseDTO.setStoreName(stockReport.getStore().getName());</span>
<span class="nc" id="L269">                allStockReportResponseDTO.setCurrentStock(stockReport.getProduct().getStock());</span>
<span class="nc" id="L270">                allStockReportResponseDTOs.add(allStockReportResponseDTO);</span>
<span class="nc" id="L271">            }</span>
<span class="nc" id="L272">            return new ResponseEntity(allStockReportResponseDTOs, HttpStatus.OK);</span>
<span class="nc" id="L273">        } catch (Exception e) {</span>
<span class="nc" id="L274">            e.printStackTrace();</span>
<span class="nc" id="L275">            return new ResponseEntity(HttpStatus.BAD_REQUEST);</span>
        }
    }
    // 발주 신청 store_id별 내역 조회
    // service 활용해서 is_submit=1이고 특정 store_id를 가진 열들만 조회
    // hq는 manager, staff가 발주 신청한 내역만 조회가능하다.List&lt;AllStockReportResponseDTO&gt;
    @GetMapping(&quot;/ordered-product-list/store-id&quot;)
    public ResponseEntity submitStockReportByStoreId(@RequestParam(&quot;storeId&quot;) Long storeId) {
        try {
<span class="nc" id="L284">            List&lt;StockReport&gt; stockReports = stockReportRepository.findByIsSubmitAndStoreId(true,storeId);</span>
<span class="nc" id="L285">            List&lt;AllStockReportResponseDTO&gt; allStockReportResponseDTOs = new ArrayList&lt;&gt;();</span>

<span class="nc bnc" id="L287" title="All 2 branches missed.">            for(StockReport stockReport:stockReports) {</span>
<span class="nc" id="L288">                AllStockReportResponseDTO allStockReportResponseDTO = new AllStockReportResponseDTO();</span>
<span class="nc" id="L289">                allStockReportResponseDTO.setLastModifiedDate(stockReport.getLastModifiedDate());</span>
<span class="nc" id="L290">                allStockReportResponseDTO.setProductName(stockReport.getProduct().getName());</span>
<span class="nc" id="L291">                allStockReportResponseDTO.setProductCategory(stockReport.getProduct().getCategory());</span>
<span class="nc" id="L292">                allStockReportResponseDTO.setProductSalePrice(stockReport.getProduct().getSalePrice());</span>
<span class="nc" id="L293">                allStockReportResponseDTO.setStoreName(stockReport.getStore().getName());</span>
<span class="nc" id="L294">                allStockReportResponseDTO.setCurrentStock(stockReport.getProduct().getStock());</span>
<span class="nc" id="L295">                allStockReportResponseDTOs.add(allStockReportResponseDTO);</span>
<span class="nc" id="L296">            }</span>
<span class="nc" id="L297">            return new ResponseEntity(allStockReportResponseDTOs, HttpStatus.OK);</span>
<span class="nc" id="L298">        } catch (Exception e) {</span>
<span class="nc" id="L299">            e.printStackTrace();</span>
<span class="nc" id="L300">            return new ResponseEntity(HttpStatus.BAD_REQUEST);</span>
        }
    }



    // 로그인 시 보이는 화면
    // 매장별 정보 DTO // httpstatus, body 넣어서. VO
    @GetMapping(&quot;/main/store-list&quot;)
    public ResponseEntity storeList() {
        try {
<span class="nc" id="L311">            List&lt;Store&gt; stores = storeRepository.findAll();</span>
<span class="nc" id="L312">            List&lt;StoreListDTO&gt; storeListDTOs = new ArrayList&lt;&gt;();</span>

<span class="nc bnc" id="L314" title="All 2 branches missed.">            for (Store store : stores) {</span>
<span class="nc" id="L315">                StoreListDTO storeListDTO = new StoreListDTO();</span>
<span class="nc" id="L316">                storeListDTO.setName(store.getName());</span>
<span class="nc" id="L317">                storeListDTO.setDescription(store.getDescription());</span>
<span class="nc" id="L318">                storeListDTO.setTelNumber(store.getTelNumber());</span>
<span class="nc" id="L319">                storeListDTO.setAddress(store.getAddress());</span>
<span class="nc" id="L320">                storeListDTO.setImageUrl(store.getImageUrl());</span>
<span class="nc" id="L321">                storeListDTOs.add(storeListDTO);</span>
<span class="nc" id="L322">            }</span>
<span class="nc" id="L323">            return new ResponseEntity(storeListDTOs, HttpStatus.OK);</span>
<span class="nc" id="L324">        } catch (Exception e) {</span>
<span class="nc" id="L325">            e.printStackTrace();</span>
<span class="nc" id="L326">            return new ResponseEntity(HttpStatus.BAD_REQUEST);</span>
        }
    }


}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>